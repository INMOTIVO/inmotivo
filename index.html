<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png" href="/favicon.png" />
    <link rel="apple-touch-icon" href="/icon-192.png" />
    <link rel="manifest" href="/manifest.webmanifest" />
    <meta name="theme-color" content="#4CAF50" />
    <title>INMOTIVO - Plataforma Inteligente de Arriendos con IA | Medell√≠n</title>
    <meta name="description" content="Encuentra tu espacio ideal con INMOTIVO. B√∫squeda inteligente con IA y GPS en tiempo real. Apartamentos, casas, locales y bodegas en Medell√≠n. Publica tu propiedad gratis y llega a miles de clientes potenciales." />
    <meta name="author" content="INMOTIVO" />
    <meta name="keywords" content="arriendo Medell√≠n, renta apartamentos Medell√≠n, arriendos con IA, buscar arriendo GPS, publicar propiedad gratis, inmobiliaria Medell√≠n, arrendar casa Medell√≠n, alquiler locales comerciales, arriendos Sabaneta, arriendos Envigado, arriendos Poblado" />
    
    <!-- SEO adicional -->
    <link rel="canonical" href="https://inmotivo.com/" />
    <meta name="robots" content="index, follow" />
    <meta name="googlebot" content="index, follow" />
    
    <!-- Structured Data - Organization -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "INMOTIVO",
      "url": "https://inmotivo.com",
      "logo": "https://lovable.dev/opengraph-image-p98pqg.png",
      "description": "Plataforma inteligente de arriendos con IA en Medell√≠n",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Medell√≠n",
        "addressCountry": "CO"
      },
      "sameAs": [
        "https://facebook.com/inmotivo",
        "https://instagram.com/inmotivo",
        "https://linkedin.com/company/inmotivo"
      ]
    }
    </script>
    
    <!-- Structured Data - WebSite -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "INMOTIVO",
      "url": "https://inmotivo.com",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://inmotivo.com/mapa?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://inmotivo.com/" />
    <meta property="og:title" content="INMOTIVO - Arriendos con IA en Medell√≠n | Busca y Publica Gratis" />
    <meta property="og:description" content="La plataforma inteligente que revoluciona la b√∫squeda de arriendos con IA y GPS en tiempo real. Publica tu propiedad gratis y llega a miles de clientes potenciales." />
    <meta property="og:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />
    <meta property="og:locale" content="es_CO" />
    <meta property="og:site_name" content="INMOTIVO" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="https://inmotivo.com/" />
    <meta name="twitter:title" content="INMOTIVO - Arriendos con IA en Medell√≠n" />
    <meta name="twitter:description" content="B√∫squeda inteligente con IA y GPS. Publica tu propiedad gratis." />
    <meta name="twitter:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />
    <meta name="twitter:site" content="@inmotivo" />
    <meta name="twitter:creator" content="@inmotivo" />
      
    <!-- Google Maps API -->
<script
  src="https://maps.googleapis.com/maps/api/js?key=TU_API_KEY&v=weekly&libraries=marker,places&map_ids=TU_MAP_ID"
  defer
></script>

  </head>
<script>
/* INMOTIVO ‚Äì Enhancer de navegaci√≥n (sin tocar tu UI)
   Sigue tu posici√≥n, calcula y suaviza el rumbo, rota mapa 3D y flecha.
*/
(function(){
  const GPS = { prevPos:null, heading:0, follow:true, arrow:null, map:null };
  const toRad=d=>d*Math.PI/180, toDeg=r=>r*180/Math.PI;
  function haversine(a,b){const R=6371000,dLat=toRad(b.lat-a.lat),dLng=toRad(b.lng-a.lng),la1=toRad(a.lat),la2=toRad(b.lat),x=Math.sin(dLat/2)**2+Math.cos(la1)*Math.cos(la2)*Math.sin(dLng/2)**2;return 2*R*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));}
  function bearing(a,b){const œÜ1=toRad(a.lat),œÜ2=toRad(b.lat),Œª1=toRad(a.lng),Œª2=toRad(b.lng),y=Math.sin(Œª2-Œª1)*Math.cos(œÜ2),x=Math.cos(œÜ1)*Math.sin(œÜ2)-Math.sin(œÜ1)*Math.cos(œÜ2)*Math.cos(Œª2-Œª1);return (toDeg(Math.atan2(y,x))+360)%360;}
  function smooth(prev,next){let d=((next-prev+540)%360)-180;const Œ±=0.25;return (prev+Œ±*d+360)%360;}

  function startHeadingSensorIOS(){
    const isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent);
    if(!isIOS||!window.DeviceOrientationEvent)return;
    const req=window.DeviceOrientationEvent.requestPermission;
    const enable=()=>window.addEventListener('deviceorientation',(ev)=>{
      const h=(ev.webkitCompassHeading??(360-ev.alpha))%360;
      if(Number.isFinite(h)) GPS.heading=smooth(GPS.heading,h);
    },true);
    if(typeof req==='function'){
      const trigger=document.querySelector('#btn-start-nav')||document.body;
      trigger.addEventListener('click',async function once(){try{const ok=await req();if(ok==='granted') enable();}catch(e){} trigger.removeEventListener('click',once);},{once:true});
    }else enable();
  }

  function onPos({coords}){
    if(!GPS.map) return;
    const cur={lat:coords.latitude,lng:coords.longitude};
    let raw=Number.isFinite(coords.heading)?coords.heading:GPS.heading;
    if(!GPS.prevPos) GPS.prevPos=cur;
    if(!Number.isFinite(raw)||haversine(GPS.prevPos,cur)>6){
      raw=bearing(GPS.prevPos,cur); GPS.prevPos=cur;
    }
    GPS.heading=smooth(GPS.heading,raw);

    // Rota el mapa. Si se ve al rev√©s, activa la l√≠nea con br√∫jula (üß≠)
    GPS.map.setHeading(GPS.heading);
    // GPS.map.setHeading((GPS.heading+180)%360); // üß≠ invertir

    if(GPS.arrow){ GPS.arrow.position=cur; GPS.arrow.content.style.transform=`rotate(${GPS.heading}deg)`; }

    const c=GPS.map.getCenter(); const d=haversine({lat:c.lat(),lng:c.lng()},cur);
    if(GPS.follow && d>55){ GPS.map.panTo(cur); }
  }

  function startWatching(){
    if(!navigator.geolocation) return console.warn('Geolocalizaci√≥n no disponible');
    navigator.geolocation.watchPosition(onPos,console.warn,{enableHighAccuracy:true,maximumAge:2000,timeout:8000});
  }

  function setupArrow(map){
    const wrap=document.createElement('div');
    wrap.innerHTML=`<div style="width:48px;height:48px;border-radius:24px;background:#3AA86622;display:grid;place-items:center;">
      <svg viewBox="0 0 24 24" width="28" height="28" style="fill:#fff;filter:drop-shadow(0 1px 1px rgba(0,0,0,.25))">
        <path d="M12 2l6 12-6-3-6 3z"/></svg></div>`;
    const AM=google.maps.marker?.AdvancedMarkerElement;
    if(!AM){ console.warn('Falta libraries=marker en el script de Google Maps'); return null; }
    return new AM({ map, position: map.getCenter(), content: wrap });
  }

  // API p√∫blica por si expones el mapa
  window.attachNavEnhancer=function(map){
    GPS.map=map; map.setTilt(67.5);
    GPS.arrow=setupArrow(map); startHeadingSensorIOS(); startWatching();
    console.info('INMOTIVO nav enhancer activo');
  };

  // Auto-enganche: si tu app publica la instancia como window.map
  const poll=setInterval(()=>{
    if(!window.google?.maps) return;
    const m = window.map || window.__inmotivoMap;
    if(m && typeof m.getCenter==='function'){ clearInterval(poll); window.attachNavEnhancer(m); }
  },500);
})();
</script>
<script>
/* Hook: captura cualquier mapa creado y lo expone como window.map */
(function(){
  const poll = setInterval(()=>{
    if (!window.google?.maps) return;
    if (window.__inmoHooked) { clearInterval(poll); return; }
    window.__inmoHooked = true;

    const OrigMap = google.maps.Map;
    // Monkey-patch al constructor de Map:
    // cada vez que alguien cree un mapa, lo guardamos y aplicamos el enhancer
    // sin tocar tu UI ni los archivos TSX.
    // @ts-ignore
    google.maps.Map = function(...args){
      const m = new OrigMap(...args);
      window.map = m;
      // si el enhancer ya est√° listo, lo conectamos
      if (window.attachNavEnhancer) {
        try { window.attachNavEnhancer(m); } catch(e) { console.warn(e); }
      }
      return m;
    };
    console.info('INMOTIVO: hook de Map activo (auto-attach).');
  }, 300);
})();
</script>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
